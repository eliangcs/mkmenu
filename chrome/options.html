<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<title>mkmenu Options</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
<link href="options.css" rel="stylesheet" type="text/css"/> 
<script type="text/javascript" src="jquery-1.6.4.min.js"></script>
<script type="text/javascript">

var Prefs = chrome.extension.getBackgroundPage().Prefs;

function loadForm() {
  $("input").each(function(n) { 
    var idx = this.id.indexOf("-");
    if (idx > 0) {
      var key = this.id.substring(0, idx);
      idx = parseInt(this.id.substr(idx + 1));
      this.value = Prefs[key][idx];
    } else {
      var key = this.id;
      this.value = Prefs[key];
    }
  });
}

function saveForm() {
  $("input").each(function(n) {
    var idx = this.id.indexOf("-");
    if (idx > 0) {
      var key = this.id.substring(0, idx);
      idx = parseInt(this.id.substr(idx + 1));
      Prefs[key][idx] = this.value;
    } else {
      var key = this.id;
      Prefs[key] = this.value;
    }
  });
  Prefs.save();
}

function resetForm() {
  Prefs.reset();
  loadForm();
}

$(function() {
  Prefs.load();
  //loadForm();
  
  $(".engine-name").each(function() {
	console.log(this.value);
	if (this.value == "") {
	  this.value = "Search engine name";
	}
  });
  
  $("#saveBtn").click(saveForm);
  $("#resetBtn").click(resetForm);
});

</script>
</head> 
<body>

<h1 id="header"><img src="icon_64.png" alt="mkmenu" width="64" height="64" class="logo"/>mkmenu Options</h1>
<div class="field-pair">
  <div class="field-name">Search engines</div>
  <div class="field-value">
    <table id="search-engine-table">
      <tr>
        <td class="cell-diag">
          <b>NW</b><br/>
          <input type="text" name="engine-name-0" size="25" maxlength="40" class="engine-name" value="f"/><br/>
          <input type="text" name="engine-url-0" size="25" maxlength="255" class="engine-url" value="taeta"/>
        </td>
        <td class="cell-ortho">
          <b>N</b><br/>
          <input type="text" name="engine-name-1" size="25" maxlength="40" class="engine-name" value=""/><br/>
          <input type="text" name="engine-url-1" size="25" maxlength="255" class="engine-url" value=""/>
        </td>
        <td class="cell-diag">
          <b>NE</b><br/>
          <input type="text" name="engine-name-2" size="25" maxlength="40" class="engine-name" value=""/><br/>
          <input type="text" name="engine-url-2" size="25" maxlength="255" class="engine-url" value=""/>
        </td>
      </tr>
      <tr>
        <td class="cell-ortho">
          <b>W</b><br/>
          <input type="text" name="engine-name-7" size="25" maxlength="40" class="engine-name" value=""/><br/>
          <input type="text" name="engine-url-7" size="25" maxlength="255" class="engine-url" value=""/>
        </td>
        <td class="cell-center">&nbsp;</td>
        <td class="cell-ortho">
          <b>E</b><br/>
          <input type="text" name="engine-name-3" size="25" maxlength="40" class="engine-name" value=""/><br/>
          <input type="text" name="engine-url-3" size="25" maxlength="255" class="engine-url" value=""/>
        </td>
      </tr>
      <tr>
        <td class="cell-diag">
          <b>SW</b><br/>
          <input type="text" name="engine-name-6" size="25" maxlength="40" class="engine-name" value=""/><br/>
          <input type="text" name="engine-url-6" size="25" maxlength="255" class="engine-url" value=""/>
        </td>
        <td class="cell-ortho">
          <b>S</b><br/>
          <input type="text" name="engine-name-5" size="25" maxlength="40" class="engine-name" value=""/><br/>
          <input type="text" name="engine-url-5" size="25" maxlength="255" class="engine-url" value=""/>
        </td>
        <td class="cell-diag">
          <b>SE</b><br/>
          <input type="text" name="engine-name-4" size="25" maxlength="40" class="engine-name" value=""/><br/>
          <input type="text" name="engine-url-4" size="25" maxlength="255" class="engine-url" value=""/>
        </td>
      </tr>
    </table>
  </div>
</div>

<div class="field-pair">
  <div class="field-name">&nbsp;</div>
  <div class="field-value">
    <button id="saveBtn">Save</button>
    <button id="resetBtn">Reset</button>
  </div>
</div>


</body>
</html>
